version: "3.1"

rules:
  - rule: Say hi anytime the user says hi
    steps:
      - intent: greet
      - action: utter_greet

  - rule: Say goodbye anytime the user says goodbye
    steps:
      - intent: goodbye
      - action: utter_goodbye

  - rule: Say 'I am a bot' anytime the user asks if is bot
    steps:
      - intent: is_bot_or_human
      - action: utter_iamabot

  - rule: Say you're welcome anytime the user says thank you
    steps:
      - intent: thankyou
      - action: utter_youarewelcome
  
  - rule: Respond to chitchat
    steps:
      - intent: chitchat
      - action: utter_chitchat

  # Fallback Rule according to: https://rasa.com/docs/rasa/next/fallback-handoff/#two-stage-fallback
  - rule: Implementation of the Two-Stage-Fallback
    steps:
      - intent: nlu_fallback
      - action: action_two_stage_fallback
      - active_loop: action_two_stage_fallback

  # Form Interrupt Rules
  - rule: is_bot_or_human in job search form
    condition:
      - active_loop: job_search_form
    steps:
      - intent: is_bot_or_human
      - action: utter_iamabot
      - action: utter_ask_continue

  - rule: greet in job search form
    condition:
      - active_loop: job_search_form
    steps:
      - intent: greet
      - action: utter_greet
      - action: utter_ask_continue

  # Form Rules
  - rule: Activate Job Search Form
    steps:
      - intent: search_jobs
      - action: action_reset_all_slots
      - action: job_search_form
      - active_loop: job_search_form

  - rule: Submit Job Search Form
    condition:
      - active_loop: job_search_form
    steps:
      - action: job_search_form
      - active_loop: null
      - slot_was_set:
          - requested_slot: null
      - action: action_search_jobs

  
